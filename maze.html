<html>
<body>
    <style>
        #myCanvas{
            border: solid 1px black;
        }
    </style>
</body>

<canvas id="myCanvas" width="800" height="600" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>


<script>

	function reDrawCorners()
	{
		ctx.beginPath();
		ctx.fillStyle = "LightGreen";
		ctx.fillRect(0, 0, cellSize, cellSize);
		ctx.fillStyle = "lightcoral";
		ctx.fillRect(myCanvas.width - cellSize, myCanvas.height - cellSize, cellSize, cellSize);
		ctx.closePath();
		ctx.stroke();

	}


    class Cell
    {


        constructor(x, y)
        {

            this.x = x;
            this.y = y;
            this.leftWall = true;// Math.random() >= 0.5;
            this.topWall = true;// Math.random() >= 0.5;
			this.rightWall = true;// Math.random() >= 0.5;
            this.bottomWall = true;// Math.random() >= 0.5;
        }

        xC()
        {
            return this.x;
        }

        yC()
        {
            return this.y;
        }
		
		removeLeftWall()
		{
			this.leftWall = false;
		}

		removeRightWall()
		{
			this.rightWall = false;
		}
		
		removeTopWall()
		{
			this.topWall = false;
		}
		
		removeBottomWall()
		{
			this.bottomWall = false;
		}
		
        draw()
        {
            var xCor = this.xC();
            var yCor = this.yC();
			
			ctx.beginPath();
            ctx.moveTo(xCor, yCor);
            if(this.leftWall)
                ctx.lineTo(xCor, yCor + cellSize);
            ctx.moveTo(xCor, yCor + cellSize);

            if(this.bottomWall)
                ctx.lineTo(xCor + cellSize, yCor + cellSize );
            ctx.moveTo(xCor + cellSize, yCor + cellSize);

            if(this.rightWall)
                ctx.lineTo(xCor + cellSize, yCor);
            ctx.moveTo(xCor + cellSize, yCor);

            if(this.topWall)
                ctx.lineTo(xCor, yCor);

            ctx.closePath();
            ctx.stroke();
        }

    }

	class Maze
    {


        constructor()
        {
			this.cells = []
        }

    }

	
	
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var cellSize = 100;

    
	reDrawCorners()

    var cells = [];

    var count = 0;
    for(var width = 0; width <= myCanvas.width; width += cellSize )
    {
		cells.push([])
		for(var height = 0; height <= myCanvas.height; height += cellSize )
        {
            cells[count].push(new Cell(width, height));
        }
		count++;
    }
	
    for(var x = 0; x < cells.length; x++)
    {
		for(var y = 0; y < cells[x].length; y++)
			cells[x][y].draw();
    }
	
	for(var x = 0; x < cells.length; x++)
    {
		for(var y = 0; y < cells[x].length; y++)
		{
			console.log("x : " + x + " y : " + y);
			
			var rand = Math.ceil(Math.random()*4);
			console.log(rand);
			// if(x == 3)
			// {
				// cells[x][y].removeLeftWall();
				// cells[x - 1][y].removeRightWall();
			// }


			// Right wall and bottom wall can be removed
			// Top wall and left wall work
			// This is a bounding issue
			if( x - 1 > 0 && rand == 4)
			{
				cells[x][y].removeLeftWall();
				cells[x - 1][y].removeRightWall();
			}
			else if( x + 1 < cells.length && rand == 2)
			{
				cells[x][y].removeRightWall();
				cells[x + 1][y].removeLeftWall();
			}
			else if( y - 1 > 0 && rand == 1)
			{
				cells[x][y].removeTopWall();
				cells[x][y - 1].removeBottomWall();
			}
			else if( y + 1 < cells[x].length && rand == 3)
			{
				cells[x][y].removeBottomWall();
				cells[x][y + 1].removeTopWall();
			}
			
			// if( x - 1 >= 0)
				// console.log("Neighbour x - 1 : " + (x - 1) + " y : " + y);
			// if( x + 1 < cells.length)
				// console.log("Neighbour x - 1 : " + (x + 1) + " y : " + y);			
			// if( y - 1 >= 0)
				// console.log("Neighbour x - 1 : " + x + " y : " + (y - 1));
			// if( y + 1 < cells[x].length)
				// console.log("Neighbour x - 1 : " + x + " y : " + (y + 1));
		}
	}
	
	ctx.clearRect(0, 0, myCanvas.width, myCanvas.height);
	
	
	reDrawCorners()
	
    for(var x = 0; x < cells.length; x++)
    {
		for(var y = 0; y < cells[x].length; y++)
		{
			cells[x][y].draw();
			console.log("argh");
		}
	}


</script>


</body>
</html>
